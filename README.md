# monarch-mapping-commons

A collection of all SSSOM-style mapping files used for the Monarch Initiative knowledge graph.  
This repository was created

## Repository Structure

- [config/](config/) - configuration files
  - [project-cruft.json](config/project-cruft.json) - edit this if you need to change any of the project template values in [.cruft.json](.cruft.json)
- [mappings/](mappings/) - SSSOM mapping files (do not edit these)
- [scripts/](scripts/) - scripts for processing mappings (ok to edit these)
- [Makefile](Makefile) - Default makefile generated by the cookiecutter (Do not edit this file)
- [monarch_mapping_commons.Makefile](monarch_mapping_commons.Makefile) - Custom makefile with additional targets specific to this project (ok to edit this file)

## Usage

### Prerequisites

- [Python 3.10 - 3.13](https://www.python.org/downloads/)
- [Poetry](https://python-poetry.org/docs/#installation)
- [Docker](https://docs.docker.com/get-docker/)

### Installation

```sh
git clone https://github.com/monarch-initiative/monarch-mapping-commons.git
cd monarch-mapping-commons
poetry install
```

### Running

```sh
make mappings
```

## Developer Documentation

To update the mapping registry from OLS:

```sh
sh odk.sh make update_registry -B
```

To update the mappings:

```sh
sh odk.sh make mappings
```

If the run requires a recently published SSSOM or OAK feature, first update ODK:

```sh
docker pull obolibrary/odkfull:dev
```

and then run the `dependencies` goal together with the mappings goal:

```sh
IMAGE=odkfull:dev sh odk.sh make mappings
```

For Windows, append `:dev` to `obolibrary/odkfull` in the `odk.bat` file.

_Note: If running on a Windows machine, replace `sh odk.sh` with `odk.bat` in the above commands._

## Design decisions:

1. Only mappings of base entities are extracted. This ensures that we do not import the same UBERON mapping for every species specific anatomy ontology (XAO). This is realised as a filtering step that relies on the crude assumption that the ontology ID is somehow reflected in the subject_id.

## Credits

This project was made with the
[mapping-commons-cookiecutter](https://github.com/mapping-commons/mapping-commons-cookiecutter).
